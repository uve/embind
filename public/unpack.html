<!doctype html>
<html>
  <script>

    function getMBSize(x) {
      return Number.parseFloat(x / (1024 * 1024)).toFixed(2);
    }

    
    var Module = {
      onRuntimeInitialized: async function() {
        let t1 = Date.now();


     
       let retVector = Module.msg_unpack(); // "hello"


      console.log(retVector);

    
        console.log("all unpack + data transferring = ", Date.now() - t1 );

      

        let dataArray = retVector.data;


        let str = JSON.stringify(dataArray);
      
        console.log("JSON stringify time = ", Date.now() - t1 );


        console.log("JSON length = ", getMBSize(str.length), "MB" );


        t1 = Date.now();
        data = JSON.parse(str);
      
        console.log("JSON parse time = ", Date.now() - t1 );


        console.log("data[0]", data[0]);

        

      }
    };
  </script>
  <script src="./unpack.js"></script>
</html>